<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="./public/index.css">
    <title>Document</title>
</head>
<body>

    <h1 style="text-align: center;"> PROJET BASE DE DONNÉES </h1>
    
    <div id="div">
        
    </div>

    <br><br>
    <h2> Les requetes </h2>
    <hr>
    <div class="buttons">
        <button onclick="request_1()">1. Afficher la liste de tous les clubs de Efrei en précisant leur type, président et
            description. </button>
        <button onclick="request_2()">2. Afficher la liste des évènements qui ont eu lieu l’année passée, avec leur comité
            d’organisation, budget alloué et dépenses</button>
        <button onclick="request_3()">3. Afficher l’état des rapports d’activité de chaque club.</button>
        <button onclick="request_4()">4. Pour les rapports en cours de signature, afficher la liste des membres qui n’ont pas
            encore signé.</button>
        <button onclick="request_5()">5. Afficher les étudiants qui participent à plus d’un seul club, en indiquant le nom du
            club et leur position au sein de celui-ci </button>
        <button onclick="request_6()">6. Afficher la liste des dix tâches les plus coûteuses, avec leurs prix, et responsable.</button>
        <button onclick="request_7()">7. Donner les évènements communs à plusieurs clubs, avec la liste de leurs
            responsables, et leurs affectations</button>
        <button onclick="request_8()">8. Afficher la liste des récompenses allouées à chaque club, ainsi que leurs
            provenances.</button>
    </div>

    <h2> Les vues </h2>
    <hr>
    <div class="buttons">
        <a href="">1. Créer une vue appelée « top_clubs » qui permet de donner la liste des clubs qui
            respectent toujours leur budget (dont la dépense est inférieure au budget et aux
            rentrées d’argent). </a>
        <a href="">2. Créer une vue appelée « top_présidents » qui les présidents de clubs qui rédigent le
            rapport d’activité dans les délais les plus courts.</a>
        <a href="">3. Créer une vue appelée « aujourd’hui », qui donne la liste des évènements prévus
            pour aujourd’hui, classés par horaire, et en indiquant le (ou les) clubs responsables.</a>
        <a href="">
            4. Créer une vue appelée « fainéant », qui donne le nom du membre du comité
            d’organisation d’un club donné qui signe le rapport en dernier.</a>
        <a href="">5. Créer une vue appelée « trouble_fête », qui donne le nom du club ayant eu le plus
            de sanctions.</a>
        <a href="">6. Créer une vue appelée « vaut_mieux_acheter » qui donne les tâches de type
            « location » les plus coûteuses.</a>
        <a href="">7. Créer une vue appelée « teachers_pet » qui donne le nom du club ayant eu le plus
            de récompenses de la part de l’administration.</a>
        <a href="">8. Créer une vue appelée « perf » qui donne, pour un club donné, la liste de tous ses
            présidents classés par date, avec pour chacun les évènements qu’il a organisé,
            l’argent qu’il a pu obtenir du sponsoring, le temps pris pour la rédaction du rapport,
            et les récompenses et sanctions obtenues pendant son mandat.</a>
    </div>

    <script>

        function createTable(data)
        {
            const body = document.body;
            const table = document.createElement('table');
            
            body.appendChild(table);

            const row = document.createElement('tr');
            table.appendChild(row)

            for (let element in data[0]) {
                console.log(element)
                const colummnhead = document.createElement('th');
                colummnhead.textContent = element
                row.appendChild(colummnhead)
            }

            for (let element of data) {
                const row = document.createElement('tr');
                table.appendChild(row)
                
                for (let item in element) {
                    const colummn = document.createElement('td');
                    colummn.textContent = element[item]
                    row.appendChild(colummn)
                }
            }
        }


        function request_1()
        {
            axios.get('http://localhost:3000/')
            .then(function (response) {
                createTable(response.data)
                console.log(response.data)
            })
            .catch(function (error) {
                
                console.log(error);
            })
        }
        function request_2()
        {
            axios.get('http://localhost:3000/')
            .then(function (response) {
                document.getElementById("p").textContent = response.data[0].etat_actuel;
                console.log(response.data);
            })
            .catch(function (error) {
                
                console.log(error);
            })
        }

    </script>

</body>
</html>